/*! For license information please see player-js.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([["player-js"],{"./template-parts/player/assets/js/fetchFeedpressHits.js":function(e,t,a){var s=a("./node_modules/applyfilters/applyFilters.js");s.addFilter("mediaPlayerCollection",(function(e,t){!function(e){if(mediaPlayerCollectionLength=e.length,postIds=[],mediaPlayerCollectionLength>0&&(e.forEach((function(e){var t=e.node.parentNode,a=null!=t?t.dataset.postId:null;a&&(postIds.push(a),e.postId=a)})),postIds.length>0)){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){var a=JSON.parse(JSON.parse(t.responseText));a!={}&&e.forEach((function(e){var t=e.node.parentNode.querySelector(".icon-cassette");t.innerText&&(t.innerText=a[e.postId])}))}},t.open("POST",window.wpsofa.rest_url+"wpffph/v1/hits"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("ids="+postIds.join(","))}}(t),e()}),1)},"./template-parts/player/assets/js/likeEpisode.js":function(e,t,a){var s=a("./node_modules/applyfilters/applyFilters.js"),r=a("./node_modules/@web-dev-media/localstorage/index.js");s.addFilter("mediaPlayerObject",(function(e,t){!function(e){if(e){var t=r.get(e.hash+"_episode_liked"),a=e.node.parentNode.querySelector(".episodeLike");null===t?a&&a.addEventListener("click",(function(){if(null===r.get(e.hash+"_episode_liked")){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(a.innerHTML=t.responseText,a.classList.remove("icon-star-regular"),a.classList.add("icon-star-solid"))},t.open("POST",window.wpsofa.ajax_url),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("action=like_episode&post_id="+e.node.parentNode.dataset.postId),r.update(e.hash+"_episode_liked",!0)}})):(a.classList.remove("icon-star-regular"),a.classList.add("icon-star-solid"))}}(t),e()}),1)},"./template-parts/player/assets/js/player.js":function(e,t,a){function s(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var r=a("./node_modules/applyfilters/applyFilters.js"),o=a("./node_modules/@web-dev-media/localstorage/index.js"),n=a("./node_modules/object-hash/dist/object_hash.js"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t={storage_key:"wpsofa-player-storage",currentPos:0,selectors:{player:".player",controls:{startStop:".media-action",progressBar:".progress",progressBarStatus:".progress .status",duration:".status"}}};r.doFilter("mediaPlayerOptions",t).then((function(){return t})),this.options=t,this.players=[],o.options.cacheTime=-1,this.collectPlayers(),this.players.length>0&&this.addEvents(),r.doFilter("mediaPlayerCollection",this.players).then((function(){return t}))}var t,a,i;return t=e,(a=[{key:"collectPlayers",value:function(){var e=this;if(e.options.selectors){var t=e.options.selectors.player;if(t){var a=document.querySelectorAll(t);[].forEach.call(a,(function(a){var s={},o={},i=a.querySelector("audio"),l=i.querySelectorAll("source");if(l){for(t in[].forEach.call(l,(function(e){var t=e.getAttribute("type");o[t]=e.getAttribute("src")})),e.options.selectors.controls)s[t]=a.querySelector(e.options.selectors.controls[t]);s.currentTime=a.querySelector(".current-time");var u={node:a,audio:i,controls:s,sources:o,sourcesNodes:l,hash:n(o)};r.doFilter("mediaPlayerObject",u).then((function(){return u})),e.players.push(u)}}))}}}},{key:"addEvents",value:function(){var e=this;this.players&&this.players.forEach((function(t){o.update(t.hash+"_isPlaying",!1),["play","pause","timeupdate"].map((function(a){t.audio.addEventListener(a,(function(s){return e[a](t)}))})),t.controls.startStop.addEventListener("click",(function(a){return e.playStop(a.currentTarget,t)})),t.controls.progressBar.addEventListener("click",(function(a){return e.seek(a,t)})),e.timeupdate(t)}))}},{key:"playStop",value:function(e,t){var a=e.querySelector("div"),s="play",r="pause";a.classList.contains(s)?(a.classList.remove(s),a.classList.add(r),e.classList.remove(s),e.classList.add(r),t.audio.play(),t.audio.currentTime=o.get(t.hash+"_currentTime"),o.update(t.hash+"_isPlaying",!0)):(a.classList.remove(r),a.classList.add(s),e.classList.remove(r),e.classList.add(s),t.audio.pause(),o.update(t.hash+"_isPlaying",!1))}},{key:"play",value:function(e){this.playerTimeUpdater(e)}},{key:"pause",value:function(e){this.playerTimeUpdater(e)}},{key:"timeupdate",value:function(e){var t=e.audio.currentTime?e.audio.currentTime:o.get(e.hash+"_currentTime"),a=e.audio.duration?e.audio.duration:o.get(e.hash+"_duration");if(t){var s=e.controls.currentTime,r=Math.floor(100/a*t);e.controls.progressBarStatus.style.width=r+"%",s.dataset.progress=r>85?"85":r>70?"70":r>45?"45":r>15?"15":"0",!0===o.get(e.hash+"_isPlaying")&&null!=a&&(o.update(e.hash+"_currentTime",e.audio.currentTime),o.update(e.hash+"_duration",e.audio.duration)),[].forEach.call(e.sourcesNodes,(function(e){var a=e.getAttribute("src");e.setAttribute("src",a.split("#")[0]+"#t="+t)})),this.playerTimeUpdater(e)}}},{key:"playerTimeUpdater",value:function(e){var t=e.controls.currentTime,a=e.audio.currentTime?e.audio.currentTime:o.get(e.hash+"_currentTime");a&&(t.innerText=this.formatSecondsAsTime(a))}},{key:"formatSecondsAsTime",value:function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),s=Math.floor(e-3600*t-60*a);return a<10&&(a="0"+a),s<10&&(s="0"+s),t<10&&(t="0"+t),t+":"+a+":"+s}},{key:"seek",value:function(e,t){var a=e.offsetX/t.node.offsetWidth;t.audio.currentTime=a*t.audio.duration,o.update(t.hash+"_currentTime",t.audio.currentTime),o.update(t.hash+"_duration",t.audio.duration),this.timeupdate(t)}}])&&s(t.prototype,a),i&&s(t,i),e}();e.exports=i}}]);
//# sourceMappingURL=player-js.chunk.js.map