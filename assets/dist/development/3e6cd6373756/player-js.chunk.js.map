{"version":3,"sources":["webpack:///./template-parts/player/assets/js/fetchFeedpressHits.js","webpack:///./template-parts/player/assets/js/likeEpisode.js","webpack:///./template-parts/player/assets/js/player.js"],"names":["applyfilters","require","hash","localstorageHandle","addFilter","resolve","mediaPlayerCollection","mediaPlayerCollectionLength","length","postIds","updateHits","hits","fromCache","undefined","JSON","parse","forEach","mediaPlayer","hitsElems","node","parentNode","querySelectorAll","postId","hitsElem","currentAmount","innerText","fetchedHits","console","log","playerParentNode","dataset","push","timestamp","get","Date","now","xhr","XMLHttpRequest","onreadystatechange","readyState","update","responseText","open","window","wpsofa","rest_url","setRequestHeader","send","join","fetchFeedpressHits","mediaPlayerObject","liked","likeBtn","querySelector","likes","before","Promise","reject","innerHTML","replace","addEventListener","classList","remove","add","likeEpisode","player","options","storage_key","currentPos","selectors","controls","startStop","progressBar","progressBarStatus","duration","doFilter","then","this","players","cacheTime","collectPlayers","addEvents","self","selector","document","call","playerControls","playerSources","audio","sourcesNodes","source","type","getAttribute","currentTime","sources","map","event","e","playStop","currentTarget","seek","timeupdate","playStopElem","btn","classes","contains","play","pause","playerTimeUpdater","currTimeElem","percent","Math","floor","style","width","progress","src","setAttribute","split","formatSecondsAsTime","secs","hr","min","sec","mouse","offsetX","offsetWidth","module","exports"],"mappings":";6IAAA,IAAMA,EAAeC,EAAS,+CACxBC,EAAOD,EAAS,kDAChBE,EAAqBF,EAAS,uDAiEpCD,EAAaI,UAAW,yBAAyB,SAAEC,EAASC,IA/DnC,SAAEA,GAC1BC,4BAA8BD,EAAsBE,OACpDC,QAAU,GACV,IAEMC,EAAa,SAAUC,EAAMC,QAGpBC,KAFdF,EAAOG,KAAKC,MAAOD,KAAKC,MAAOJ,MAG9BL,EAAsBU,SAAS,SAAAC,GAC9B,IAAIC,EAAYD,EAAYE,KAAKC,WAAWC,iBAAkB,cAC9DJ,EAAYN,KAAOA,EAAMM,EAAYK,QAErCJ,EAAUF,SAAS,SAAAO,GAClB,IAAIC,EAAgBD,EAASE,UACzBC,EAAcf,EAAMM,EAAYK,QAEpCK,QAAQC,IAAIF,GAEPA,EAAcF,IAClBD,EAASE,UAAYD,UAO1B,GAAKjB,4BAA8B,EAAI,CACtCD,EAAsBU,SAAS,SAAAC,GAC9B,IAAIY,EAAmBZ,EAAYE,KAAKC,WACpCE,EAA6B,MAApBO,EAA2BA,EAAiBC,QAAQR,OAAS,KAGrEA,QAA+BT,IAArBI,EAAYN,OAC1BF,QAAQsB,KAAMT,GACdL,EAAYK,OAASA,MAIvB,IAAIU,EAAY7B,EAAmB8B,IApCb,eAoCmC/B,EAAMO,SAAY,cACvEE,EAAOuB,KAAKC,MAAQH,EACvB,KACG,KAAO7B,EAAmB8B,IAvCR,eAuC8B/B,EAAMO,UAE1D,IAAME,GAAQF,QAAQD,OAAS,EAAI,CAClC,IAAI4B,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,WACA,IAAnBF,EAAIG,aACRpC,EAAmBqC,OA7CA,eA6CyBtC,EAAMO,SAAW2B,EAAIK,cACjEtC,EAAmBqC,OA9CA,eA8CyBtC,EAAMO,SAAY,aAAcyB,KAAKC,OACjFzB,EAAY0B,EAAIK,gBAIlBL,EAAIM,KAAM,OAAQC,OAAOC,OAAOC,SAAW,kBAC3CT,EAAIU,iBAAkB,eAAgB,qCACtCV,EAAIW,KAAM,OAAStC,QAAQuC,KAAM,WAEjCtC,EAAYC,IAMdsC,CAAoB3C,GACpBD,MACE,I,mECtEH,IAAML,EAAeC,EAAS,+CACxBE,EAAqBF,EAAS,uDAgEpCD,EAAaI,UAAW,qBAAqB,SAAEC,EAAS6C,IA7DtC,SAAEA,GAGnB,GAAKA,EAAoB,CACxB,IAAIC,EAAQhD,EAAmB8B,IAAKiB,EAAkBhD,KAHpC,kBAIdkD,EAAUF,EAAkB/B,KAAKC,WAAWiC,cAAe,qBACnBxC,IAA5BqC,EAAkBI,OAAsBJ,EAAkBI,MAE1E3B,QAAQC,IAAI,CAAC2B,OAAQL,EAAkBI,QAEnCJ,EAAkBI,OACrB,IAAIE,SAAQ,SAACnD,EAASoD,GACrB,IAAIrB,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,WACA,IAAnBF,EAAIG,aACRa,EAAQM,UAAYtB,EAAIK,aAAakB,QAAS,IAAK,IAAKA,QAAS,IAAK,IACtET,EAAkBI,MAAQxC,KAAKC,MAAOqB,EAAIK,cAC1CpC,MAIF+B,EAAIM,KAAM,OAAQC,OAAOC,OAAOC,SAAW,2BAC3CT,EAAIU,iBAAkB,eAAgB,qCACtCV,EAAIW,KAAM,MAAQG,EAAkB/B,KAAKC,WAAWU,QAAQR,WAI/C,OAAV6B,EAECC,GACJA,EAAQQ,iBAAkB,SAAS,WAGnB,OAFHzD,EAAmB8B,IAAKiB,EAAkBhD,KA9BvC,mBAkCd,IAAIsD,SAAQ,SAACnD,EAASoD,GACrB,IAAIrB,EAAM,IAAIC,eACdD,EAAIE,mBAAqB,WACD,IAAnBF,EAAIG,aACRa,EAAQM,UAAa5C,KAAKC,MAAMqB,EAAIK,cACpCW,EAAQS,UAAUC,OAAQ,qBAC1BV,EAAQS,UAAUE,IAAK,qBAIxB3B,EAAIM,KAAM,OAAQC,OAAOC,OAAOC,SAAW,2BAC3CT,EAAIU,iBAAkB,eAAgB,qCACtCV,EAAIW,KAAM,MAAQG,EAAkB/B,KAAKC,WAAWU,QAAQR,QAE5DnB,EAAmBqC,OAAQU,EAAkBhD,KAhDhC,kBAgDmD,UAMpEkD,EAAQS,UAAUC,OAAO,qBACzBV,EAAQS,UAAUE,IAAI,qBAMxBC,CAAad,GACb7C,MACE,I,oOChEH,IAAML,EAAeC,EAAS,+CACxBE,EAAqBF,EAAS,uDAC9BC,EAAOD,EAAS,kDAEhBgB,E,WACL,aACC,G,4FADa,cACeJ,IAAzB8B,OAAOC,OAAOqB,OAAjB,CAIA,IAAIC,EAAU,CACbC,YAAa,wBACbC,WAAa,EACbC,UAAa,CACZJ,OAAU,UACVK,SAAU,CACTC,UAAmB,gBACnBC,YAAmB,YACnBC,kBAAmB,oBACnBC,SAAmB,aAKtB1E,EAAa2E,SAAU,qBAAsBT,GAAUU,MAAK,WAC3D,OAAOV,KAGRW,KAAKX,QAAUA,EAEfW,KAAKC,QAAU,GAEf3E,EAAmB+D,QAAQa,WAAa,EAExCF,KAAKG,iBAEAH,KAAKC,QAAQtE,OAAS,IAC1BmC,OAAOC,OAAOqB,OAASY,KAAKC,QAE5BD,KAAKI,YAELjF,EAAa2E,SAAU,wBAAyBE,KAAKC,SAAUF,MAAK,WACnE,OAAOV,O,gEAgBT,IAAIgB,EAAOL,KAEX,GAAKK,EAAKhB,QAAQG,UAAY,CAC7B,IAAIc,EAAWD,EAAKhB,QAAQG,UAAUJ,OAEtC,GAAKkB,EAAW,CACf,IAAIL,EAAUM,SAAS/D,iBAAkB8D,GAEzC,GAAGnE,QAAQqE,KAAMP,GAAS,SAAUb,GACnC,IAAIqB,EAAiB,GACjBC,EAAgB,GAEhBC,EAAQvB,EAAOZ,cAAe,SAC9BoC,EAAeD,EAAMnE,iBAAkB,UAE3C,GAAKoE,EAAe,CAMnB,IAAMN,IALN,GAAGnE,QAAQqE,KAAMI,GAAc,SAAUC,GACxC,IAAIC,EAAOD,EAAOE,aAAc,QAChCL,EAAeI,GAASD,EAAOE,aAAc,UAG5BV,EAAKhB,QAAQG,UAAUC,SACxCgB,EAAgBH,GAAalB,EAAOZ,cAAe6B,EAAKhB,QAAQG,UAAUC,SAAUa,IAGrFG,EAAeO,YAAc5B,EAAOZ,cAAe,iBAEnD,IAAIH,EAAoB,CACtB/B,KAAc8C,EACduB,MAAcA,EACdlB,SAAcgB,EACdQ,QAAcP,EACdE,aAAcA,EACdvF,KAAcA,EAAMqF,IAGtBvF,EAAa2E,SAAU,oBAAqBzB,GAAoB0B,MAAK,WACpE,OAAO1B,KAGRgC,EAAKJ,QAAQ/C,KAAKmB,W,kCAQX,WACN2B,KAAKC,SACTD,KAAKC,QAAQ9D,SAAS,SAAAiD,GACrB9D,EAAmBqC,OAAQyB,EAAO/D,KAAO,cAAc,GAEvD,CAAE,OAAQ,QAAS,cAAe6F,KAAK,SAAAC,GACtC/B,EAAOuB,MAAM5B,iBAAkBoC,GAAO,SAAEC,GAAF,OAAS,EAAMD,GAAS/B,SAG/DA,EAAOK,SAASC,UAAUX,iBAAkB,SAAS,SAAEqC,GAAF,OAAS,EAAKC,SAAUD,EAAEE,cAAelC,MAC9FA,EAAOK,SAASE,YAAYZ,iBAAkB,SAAS,SAAEqC,GAAF,OAAS,EAAKG,KAAMH,EAAGhC,MAE9E,EAAKoC,WAAYpC,Q,+BAKVqC,EAAcrC,GACvB,IAAIsC,EAAMD,EAAajD,cAAe,OAChCmD,EACE,OADFA,EAEE,QAGHD,EAAI1C,UAAU4C,SAAUD,IAC5BD,EAAI1C,UAAUC,OAAQ0C,GACtBD,EAAI1C,UAAUE,IAAKyC,GAEnBF,EAAazC,UAAUC,OAAQ0C,GAC/BF,EAAazC,UAAUE,IAAKyC,GAE5BvC,EAAOuB,MAAMkB,OACbzC,EAAOuB,MAAMK,YAAc1F,EAAmB8B,IAAKgC,EAAO/D,KAAO,gBACjEC,EAAmBqC,OAAQyB,EAAO/D,KAAO,cAAc,KAEvDqG,EAAI1C,UAAUC,OAAQ0C,GACtBD,EAAI1C,UAAUE,IAAKyC,GAEnBF,EAAazC,UAAUC,OAAQ0C,GAC/BF,EAAazC,UAAUE,IAAKyC,GAE5BvC,EAAOuB,MAAMmB,QACbxG,EAAmBqC,OAAQyB,EAAO/D,KAAO,cAAc,M,2BAInD+D,GACLY,KAAK+B,kBAAmB3C,K,4BAGlBA,GACNY,KAAK+B,kBAAmB3C,K,iCAGbA,GACX,IAAI4B,EAAc5B,EAAOuB,MAAMK,YAAc5B,EAAOuB,MAAMK,YAAc1F,EAAmB8B,IAAKgC,EAAO/D,KAAO,gBAC1GwE,EAAWT,EAAOuB,MAAMd,SAAWT,EAAOuB,MAAMd,SAAWvE,EAAmB8B,IAAKgC,EAAO/D,KAAO,aAErG,GAAK2F,EAAc,CAClB,IAAIgB,EAAe5C,EAAOK,SAASuB,YAC/BiB,EAAUC,KAAKC,MAClB,IAAMtC,EACHmB,GAEJ5B,EAAOK,SAASG,kBAAkBwC,MAAMC,MAAQJ,EAAU,IAGzDD,EAAa/E,QAAQqF,SADjBL,EAAU,GACkB,KACrBA,EAAU,GACW,KACrBA,EAAU,GACW,KACrBA,EAAU,GACW,KAEA,KAG6B,IAAzD3G,EAAmB8B,IAAKgC,EAAO/D,KAAO,eAAuC,MAAZwE,IACrEvE,EAAmBqC,OAAQyB,EAAO/D,KAAO,eAAgB+D,EAAOuB,MAAMK,aACtE1F,EAAmBqC,OAAQyB,EAAO/D,KAAO,YAAa+D,EAAOuB,MAAMd,WAGpE,GAAG1D,QAAQqE,KAAMpB,EAAOwB,cAAc,SAAUC,GAC/C,IAAI0B,EAAM1B,EAAOE,aAAc,OAC/BF,EAAO2B,aAAc,MAAOD,EAAIE,MAAO,KAAO,GAAM,MAAQzB,MAG7DhB,KAAK+B,kBAAmB3C,M,wCAIPA,GAClB,IAAI4C,EAAe5C,EAAOK,SAASuB,YAC/BA,EAAc5B,EAAOuB,MAAMK,YAAc5B,EAAOuB,MAAMK,YAAc1F,EAAmB8B,IAAKgC,EAAO/D,KAAO,gBAEzG2F,IACJgB,EAAapF,UAAYoD,KAAK0C,oBAAqB1B,M,0CAIhC2B,GACpB,IAAIC,EAAKV,KAAKC,MAAOQ,EAAO,MACxBE,EAAMX,KAAKC,OACdQ,EACK,KAALC,GAEG,IACAE,EAAMZ,KAAKC,MAAOQ,EAChB,KAALC,EAEM,GAANC,GAaD,OAVKA,EAAM,KACVA,EAAM,IAAMA,GAERC,EAAM,KACVA,EAAM,IAAMA,GAERF,EAAK,KACTA,EAAK,IAAMA,GAGLA,EAAK,IAAMC,EAAM,IAAMC,I,2BAGzBC,EAAO3D,GACZ,IAAI6C,EAAUc,EAAMC,QAAU5D,EAAO9C,KAAK2G,YAC1C7D,EAAOuB,MAAMK,YAAciB,EAAU7C,EAAOuB,MAAMd,SAElDvE,EAAmBqC,OAAQyB,EAAO/D,KAAO,eAAgB+D,EAAOuB,MAAMK,aACtE1F,EAAmBqC,OAAQyB,EAAO/D,KAAO,YAAa+D,EAAOuB,MAAMd,UAEnEG,KAAKwB,WAAYpC,Q,gCAIT8D,EAAOC,QAAU/G","file":"player-js.chunk.js","sourcesContent":["const applyfilters = require( 'applyfilters' );\nconst hash = require( 'object-hash' );\nconst localstorageHandle = require( '@web-dev-media/localstorage' );\n\nlet fetchFeedpressHits = ( mediaPlayerCollection ) => {\n\tmediaPlayerCollectionLength = mediaPlayerCollection.length;\n\tpostIds = [];\n\tconst storageKeyBase = 'fetchedHits_';\n\n\tconst updateHits = function( hits, fromCache ) {\n\t\thits = JSON.parse( JSON.parse( hits ) );\n\n\t\tif ( hits !== undefined ) {\n\t\t\tmediaPlayerCollection.forEach( mediaPlayer => {\n\t\t\t\tlet hitsElems = mediaPlayer.node.parentNode.querySelectorAll( '.hitsCount' );\n\t\t\t\tmediaPlayer.hits = hits[ mediaPlayer.postId ];\n\n\t\t\t\thitsElems.forEach( hitsElem => {\n\t\t\t\t\tlet currentAmount = hitsElem.innerText;\n\t\t\t\t\tlet fetchedHits = hits[ mediaPlayer.postId ];\n\n\t\t\t\t\tconsole.log(fetchedHits);\n\n\t\t\t\t\tif ( fetchedHits > currentAmount ) {\n\t\t\t\t\t\thitsElem.innerText = currentAmount;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t};\n\n\tif ( mediaPlayerCollectionLength > 0 ) {\n\t\tmediaPlayerCollection.forEach( mediaPlayer => {\n\t\t\tlet playerParentNode = mediaPlayer.node.parentNode;\n\t\t\tlet postId = playerParentNode != null ? playerParentNode.dataset.postId : null;\n\t\t\t;\n\n\t\t\tif ( postId && mediaPlayer.hits === undefined ) {\n\t\t\t\tpostIds.push( postId );\n\t\t\t\tmediaPlayer.postId = postId;\n\t\t\t}\n\t\t} );\n\n\t\tlet timestamp = localstorageHandle.get( storageKeyBase + hash( postIds ) + '_timestamp' );\n\t\tlet hits = Date.now() - timestamp > (\n\t\t\t1000 * 60 * 60\n\t\t) ? null : localstorageHandle.get( storageKeyBase + hash( postIds ) );\n\n\t\tif ( !hits && postIds.length > 0 ) {\n\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\txhr.onreadystatechange = function() {\n\t\t\t\tif ( xhr.readyState === 4 ) {\n\t\t\t\t\tlocalstorageHandle.update( storageKeyBase + hash( postIds ), xhr.responseText );\n\t\t\t\t\tlocalstorageHandle.update( storageKeyBase + hash( postIds ) + '_timestamp', Date.now() );\n\t\t\t\t\tupdateHits( xhr.responseText );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.open( 'POST', window.wpsofa.rest_url + 'wpffph/v1/hits' );\n\t\t\txhr.setRequestHeader( \"Content-Type\", \"application/x-www-form-urlencoded\" );\n\t\t\txhr.send( \"ids=\" + postIds.join( ',' ) );\n\t\t} else {\n\t\t\tupdateHits( hits, true );\n\t\t}\n\t}\n};\n\napplyfilters.addFilter( 'mediaPlayerCollection', ( resolve, mediaPlayerCollection ) => {\n\tfetchFeedpressHits( mediaPlayerCollection );\n\tresolve();\n}, 1 );\n\n\n","const applyfilters = require( 'applyfilters' );\nconst localstorageHandle = require( '@web-dev-media/localstorage' );\n\n\nlet likeEpisode = ( mediaPlayerObject ) => {\n\tconst storageKey = '_episode_liked';\n\n\tif ( mediaPlayerObject ) {\n\t\tlet liked = localstorageHandle.get( mediaPlayerObject.hash + storageKey );\n\t\tlet likeBtn = mediaPlayerObject.node.parentNode.querySelector( '.episodeLike' );\n\t\tlet likeCount = mediaPlayerObject.likes !== undefined ? mediaPlayerObject.likes : null;\n\n\t\tconsole.log({before: mediaPlayerObject.likes});\n\n\t\tif(!mediaPlayerObject.likes) {\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\t\t\t\t\t\tlikeBtn.innerHTML = xhr.responseText.replace( '\"', '' ).replace( '\"', '' );\n\t\t\t\t\t\tmediaPlayerObject.likes = JSON.parse( xhr.responseText );\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\txhr.open( 'POST', window.wpsofa.rest_url + 'wpsofa/v1/like_post/get' );\n\t\t\t\txhr.setRequestHeader( \"Content-Type\", \"application/x-www-form-urlencoded\" );\n\t\t\t\txhr.send( \"id=\" + mediaPlayerObject.node.parentNode.dataset.postId );\n\t\t\t});\n\t\t}\n\n\t\tif ( liked === null ) {\n\n\t\t\tif ( likeBtn ) {\n\t\t\t\tlikeBtn.addEventListener( 'click', () => {\n\t\t\t\t\tlet liked = localstorageHandle.get( mediaPlayerObject.hash + storageKey );\n\n\t\t\t\t\tif ( liked === null ) {\n\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\t\t\t\t\txhr.onreadystatechange = function() {\n\t\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\t\t\t\t\t\t\t\tlikeBtn.innerHTML =  JSON.parse(xhr.responseText);\n\t\t\t\t\t\t\t\tlikeBtn.classList.remove( 'icon-star-regular' );\n\t\t\t\t\t\t\t\tlikeBtn.classList.add( 'icon-star-solid' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\txhr.open( 'POST', window.wpsofa.rest_url + 'wpsofa/v1/like_post/put' );\n\t\t\t\t\t\t\txhr.setRequestHeader( \"Content-Type\", \"application/x-www-form-urlencoded\" );\n\t\t\t\t\t\t\txhr.send( \"id=\" + mediaPlayerObject.node.parentNode.dataset.postId );\n\n\t\t\t\t\t\t\tlocalstorageHandle.update( mediaPlayerObject.hash + storageKey, true );\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}else{\n\t\t\tlikeBtn.classList.remove('icon-star-regular');\n\t\t\tlikeBtn.classList.add('icon-star-solid');\n\t\t}\n\t}\n};\n\napplyfilters.addFilter( 'mediaPlayerObject', ( resolve, mediaPlayerObject ) => {\n\tlikeEpisode( mediaPlayerObject );\n\tresolve();\n}, 1 );\n\n\n","/**\n * here comes the wpSofa podcast media player\n */\n\nconst applyfilters = require( 'applyfilters' );\nconst localstorageHandle = require( '@web-dev-media/localstorage' );\nconst hash = require( 'object-hash' );\n\nclass mediaPlayer {\n\tconstructor() {\n\t\tif(window.wpsofa.player !== undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet options = {\n\t\t\tstorage_key: 'wpsofa-player-storage',\n\t\t\tcurrentPos : 0,\n\t\t\tselectors  : {\n\t\t\t\tplayer  : '.player',\n\t\t\t\tcontrols: {\n\t\t\t\t\tstartStop        : '.media-action',\n\t\t\t\t\tprogressBar      : '.progress',\n\t\t\t\t\tprogressBarStatus: '.progress .status',\n\t\t\t\t\tduration         : '.status'\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tapplyfilters.doFilter( 'mediaPlayerOptions', options ).then(() => {\n\t\t\treturn options;\n\t\t});\n\n\t\tthis.options = options;\n\n\t\tthis.players = [];\n\n\t\tlocalstorageHandle.options.cacheTime = -1;\n\n\t\tthis.collectPlayers();\n\n\t\tif ( this.players.length > 0 ) {\n\t\t\twindow.wpsofa.player = this.players;\n\n\t\t\tthis.addEvents();\n\n\t\t\tapplyfilters.doFilter( 'mediaPlayerCollection', this.players ).then(() => {\n\t\t\t\treturn options;\n\t\t\t});\n\t\t}\n\n\t}\n\n\t/**\n\t * registers a function  that use a filter/hook 'this.doFilter()'\n\t * this function can modify the code execution or data\n\t *\n\t * @param {string} filterName\n\t * @param {string} callback\n\t * @param {number} priority\n\t * @return {void}\n\t */\n\tcollectPlayers() {\n\t\tlet self = this;\n\n\t\tif ( self.options.selectors ) {\n\t\t\tlet selector = self.options.selectors.player;\n\n\t\t\tif ( selector ) {\n\t\t\t\tlet players = document.querySelectorAll( selector );\n\n\t\t\t\t[].forEach.call( players, function( player ) {\n\t\t\t\t\tlet playerControls = {};\n\t\t\t\t\tlet playerSources = {};\n\n\t\t\t\t\tlet audio = player.querySelector( 'audio' );\n\t\t\t\t\tlet sourcesNodes = audio.querySelectorAll( 'source' );\n\n\t\t\t\t\tif ( sourcesNodes ) {\n\t\t\t\t\t\t[].forEach.call( sourcesNodes, function( source ) {\n\t\t\t\t\t\t\tlet type = source.getAttribute( 'type' );\n\t\t\t\t\t\t\tplayerSources[ type ] = source.getAttribute( 'src' );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tfor ( selector in self.options.selectors.controls ) {\n\t\t\t\t\t\t\tplayerControls[ selector ] = player.querySelector( self.options.selectors.controls[ selector ] );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tplayerControls.currentTime = player.querySelector( '.current-time' );\n\n\t\t\t\t\t\tlet mediaPlayerObject = {\n\t\t\t\t\t\t\t\tnode        : player,\n\t\t\t\t\t\t\t\taudio       : audio,\n\t\t\t\t\t\t\t\tcontrols    : playerControls,\n\t\t\t\t\t\t\t\tsources     : playerSources,\n\t\t\t\t\t\t\t\tsourcesNodes: sourcesNodes,\n\t\t\t\t\t\t\t\thash        : hash( playerSources )\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tapplyfilters.doFilter( 'mediaPlayerObject', mediaPlayerObject ).then(() => {\n\t\t\t\t\t\t\treturn mediaPlayerObject;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tself.players.push(mediaPlayerObject);\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\taddEvents() {\n\t\tif ( this.players ) {\n\t\t\tthis.players.forEach( player => {\n\t\t\t\tlocalstorageHandle.update( player.hash + '_isPlaying', false );\n\n\t\t\t\t[ 'play', 'pause', 'timeupdate' ].map( event => {\n\t\t\t\t\tplayer.audio.addEventListener( event, ( e ) => this[ event ]( player ) );\n\t\t\t\t} );\n\n\t\t\t\tplayer.controls.startStop.addEventListener( 'click', ( e ) => this.playStop( e.currentTarget, player ) );\n\t\t\t\tplayer.controls.progressBar.addEventListener( 'click', ( e ) => this.seek( e, player ) );\n\n\t\t\t\tthis.timeupdate( player );\n\t\t\t} );\n\t\t}\n\t}\n\n\tplayStop( playStopElem, player ) {\n\t\tlet btn = playStopElem.querySelector( 'div' );\n\t\tconst classes = {\n\t\t\tplay : 'play',\n\t\t\tpause: 'pause'\n\t\t};\n\n\t\tif ( btn.classList.contains( classes.play ) ) {\n\t\t\tbtn.classList.remove( classes.play );\n\t\t\tbtn.classList.add( classes.pause );\n\n\t\t\tplayStopElem.classList.remove( classes.play );\n\t\t\tplayStopElem.classList.add( classes.pause );\n\n\t\t\tplayer.audio.play();\n\t\t\tplayer.audio.currentTime = localstorageHandle.get( player.hash + '_currentTime' );\n\t\t\tlocalstorageHandle.update( player.hash + '_isPlaying', true );\n\t\t} else {\n\t\t\tbtn.classList.remove( classes.pause );\n\t\t\tbtn.classList.add( classes.play );\n\n\t\t\tplayStopElem.classList.remove( classes.pause );\n\t\t\tplayStopElem.classList.add( classes.play );\n\n\t\t\tplayer.audio.pause();\n\t\t\tlocalstorageHandle.update( player.hash + '_isPlaying', false );\n\t\t}\n\t}\n\n\tplay( player ) {\n\t\tthis.playerTimeUpdater( player );\n\t}\n\n\tpause( player ) {\n\t\tthis.playerTimeUpdater( player );\n\t}\n\n\ttimeupdate( player ) {\n\t\tlet currentTime = player.audio.currentTime ? player.audio.currentTime : localstorageHandle.get( player.hash + '_currentTime' );\n\t\tlet duration = player.audio.duration ? player.audio.duration : localstorageHandle.get( player.hash + '_duration' );\n\n\t\tif ( currentTime ) {\n\t\t\tlet currTimeElem = player.controls.currentTime;\n\t\t\tlet percent = Math.floor( (\n\t\t\t\t100 / duration\n\t\t\t) * currentTime );\n\n\t\t\tplayer.controls.progressBarStatus.style.width = percent + '%';\n\n\t\t\tif ( percent > 85 ) {\n\t\t\t\tcurrTimeElem.dataset.progress = \"85\";\n\t\t\t} else if ( percent > 70 ) {\n\t\t\t\tcurrTimeElem.dataset.progress = \"70\";\n\t\t\t} else if ( percent > 45 ) {\n\t\t\t\tcurrTimeElem.dataset.progress = \"45\";\n\t\t\t} else if ( percent > 15 ) {\n\t\t\t\tcurrTimeElem.dataset.progress = \"15\";\n\t\t\t} else {\n\t\t\t\tcurrTimeElem.dataset.progress = \"0\";\n\t\t\t}\n\n\t\t\tif ( localstorageHandle.get( player.hash + '_isPlaying' ) === true && duration != null ) {\n\t\t\t\tlocalstorageHandle.update( player.hash + '_currentTime', player.audio.currentTime );\n\t\t\t\tlocalstorageHandle.update( player.hash + '_duration', player.audio.duration );\n\t\t\t}\n\n\t\t\t[].forEach.call( player.sourcesNodes, function( source ) {\n\t\t\t\tlet src = source.getAttribute( 'src' );\n\t\t\t\tsource.setAttribute( 'src', src.split( '#' )[ 0 ] + '#t=' + currentTime );\n\t\t\t} );\n\n\t\t\tthis.playerTimeUpdater( player );\n\t\t}\n\t}\n\n\tplayerTimeUpdater( player ) {\n\t\tlet currTimeElem = player.controls.currentTime;\n\t\tlet currentTime = player.audio.currentTime ? player.audio.currentTime : localstorageHandle.get( player.hash + '_currentTime' );\n\n\t\tif ( currentTime ) {\n\t\t\tcurrTimeElem.innerText = this.formatSecondsAsTime( currentTime );\n\t\t}\n\t}\n\n\tformatSecondsAsTime( secs ) {\n\t\tvar hr = Math.floor( secs / 3600 );\n\t\tvar min = Math.floor( (\n\t\t\tsecs - (\n\t\t\thr * 3600\n\t\t\t)\n\t\t) / 60 );\n\t\tvar sec = Math.floor( secs - (\n\t\t\thr * 3600\n\t\t) - (\n\t\t\tmin * 60\n\t\t) );\n\n\t\tif ( min < 10 ) {\n\t\t\tmin = \"0\" + min;\n\t\t}\n\t\tif ( sec < 10 ) {\n\t\t\tsec = \"0\" + sec;\n\t\t}\n\t\tif ( hr < 10 ) {\n\t\t\thr = \"0\" + hr;\n\t\t}\n\n\t\treturn hr + ':' + min + ':' + sec;\n\t}\n\n\tseek( mouse, player ) {\n\t\tlet percent = mouse.offsetX / player.node.offsetWidth;\n\t\tplayer.audio.currentTime = percent * player.audio.duration;\n\n\t\tlocalstorageHandle.update( player.hash + '_currentTime', player.audio.currentTime );\n\t\tlocalstorageHandle.update( player.hash + '_duration', player.audio.duration );\n\n\t\tthis.timeupdate( player );\n\t}\n}\n\nexports = module.exports = mediaPlayer;"],"sourceRoot":""}