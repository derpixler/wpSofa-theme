{"version":3,"sources":["webpack:///./template-parts/player/assets/js/player.js"],"names":["localstorageHandle","require","hash","mediaPlayer","this","options","storage_key","currentPos","selectors","player","controls","startStop","progressBar","duration","players","cacheTime","collectPlayers","length","addEvents","console","log","localstorage","self","selector","document","querySelectorAll","forEach","call","playerControls","playerSources","audio","querySelector","sources","source","type","getAttribute","push","node","map","event","addEventListener","e","playStop","playStopElem","module","exports"],"mappings":"iPAAA,IAAMA,EAAqBC,EAAS,IAC9BC,EAAOD,EAAS,IAEhBE,E,WACL,c,4FAAc,SACbC,KAAKC,QAAU,CACdC,YAAa,wBACbC,WAAa,EACbC,UAAa,CACZC,OAAU,UACVC,SAAU,CACTC,UAAa,gBACbC,YAAa,YACbC,SAAU,aAKbT,KAAKU,QAAU,GAEfd,EAAmBK,QAAQU,WAAa,EAExCX,KAAKY,iBAEFZ,KAAKU,QAAQG,OAAS,GACxBb,KAAKc,YAGNC,QAAQC,IAAK,CACZC,aAAcrB,EACdc,QAAcV,KAAKU,U,gEAKpB,IAAIQ,EAAOlB,KAEX,GAAKkB,EAAKjB,QAAQG,UAAY,CAC7B,IAAIe,EAAWD,EAAKjB,QAAQG,UAAUC,OAEtC,GAAKc,EAAW,CACf,IAAIT,EAAUU,SAASC,iBAAkBF,GAEzC,GAAGG,QAAQC,KAAMb,GAAS,SAAUL,GACnC,IAAImB,EAAiB,GACjBC,EAAgB,GAEhBC,EAAQrB,EAAOsB,cAAe,SAC9BC,EAAUvB,EAAOgB,iBAAkB,UAEvC,GAAKO,GAAWF,EAAQ,CAMvB,IAAMP,IALN,GAAGG,QAAQC,KAAMK,GAAS,SAAUC,GACnC,IAAIC,EAAOD,EAAOE,aAAc,QAChCN,EAAeK,GAASD,EAAOE,aAAc,UAG5Bb,EAAKjB,QAAQG,UAAUE,SACxCkB,EAAgBL,GAAad,EAAOsB,cAAeT,EAAKjB,QAAQG,UAAUE,SAAUa,IAGrFD,EAAKR,QAAQsB,KAAM,CAClBC,KAAU5B,EACVqB,MAAUA,EACVpB,SAAUkB,EACVI,QAAUH,EACV3B,KAAUA,EAAM2B,a,kCASV,WACRzB,KAAKU,SACPV,KAAKU,QAAQY,SAAQ,SAAAjB,GACpB,CAAE,OAAQ,QAAS,WAAY,aAAc,cAAc6B,KAAK,SAAAC,OAIhE9B,EAAOC,SAASC,UAAU6B,iBAAiB,SAAS,SAACC,GAAD,OAAO,EAAKC,SAASD,EAAGhC,W,+BAMtEkC,EAAclC,GACtBU,QAAQC,IAAI,CACXuB,aAAaA,EACblC,OAAOA,S,gCAMAmC,EAAOC,QAAU1C,G","file":"player-js.chunk.js","sourcesContent":["const localstorageHandle = require( '@web-dev-media/localstorage' );\nconst hash = require( 'object-hash' );\n\nclass mediaPlayer {\n\tconstructor() {\n\t\tthis.options = {\n\t\t\tstorage_key: 'wpsofa-player-storage',\n\t\t\tcurrentPos : 0,\n\t\t\tselectors  : {\n\t\t\t\tplayer  : '.player',\n\t\t\t\tcontrols: {\n\t\t\t\t\tstartStop  : '.media-action',\n\t\t\t\t\tprogressBar: '.progress',\n\t\t\t\t\tduration: '.status'\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.players = [];\n\n\t\tlocalstorageHandle.options.cacheTime = -1;\n\n\t\tthis.collectPlayers();\n\n\t\tif(this.players.length > 0) {\n\t\t\tthis.addEvents();\n\t\t}\n\n\t\tconsole.log( {\n\t\t\tlocalstorage: localstorageHandle,\n\t\t\tplayers     : this.players\n\t\t} );\n\t}\n\n\tcollectPlayers() {\n\t\tlet self = this;\n\n\t\tif ( self.options.selectors ) {\n\t\t\tlet selector = self.options.selectors.player;\n\n\t\t\tif ( selector ) {\n\t\t\t\tlet players = document.querySelectorAll( selector );\n\n\t\t\t\t[].forEach.call( players, function( player ) {\n\t\t\t\t\tlet playerControls = {};\n\t\t\t\t\tlet playerSources = {};\n\n\t\t\t\t\tlet audio = player.querySelector( 'audio' );\n\t\t\t\t\tlet sources = player.querySelectorAll( 'source' );\n\n\t\t\t\t\tif ( sources && audio ) {\n\t\t\t\t\t\t[].forEach.call( sources, function( source ) {\n\t\t\t\t\t\t\tlet type = source.getAttribute( 'type' );\n\t\t\t\t\t\t\tplayerSources[ type ] = source.getAttribute( 'src' );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tfor ( selector in self.options.selectors.controls ) {\n\t\t\t\t\t\t\tplayerControls[ selector ] = player.querySelector( self.options.selectors.controls[ selector ] );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tself.players.push( {\n\t\t\t\t\t\t\tnode    : player,\n\t\t\t\t\t\t\taudio   : audio,\n\t\t\t\t\t\t\tcontrols: playerControls,\n\t\t\t\t\t\t\tsources : playerSources,\n\t\t\t\t\t\t\thash    : hash( playerSources )\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\taddEvents() {\n\t\tif(this.players) {\n\t\t\tthis.players.forEach(player => {\n\t\t\t\t[ 'play', 'pause', 'progress', 'timeupdate', 'loadeddata'].map( event => {\n\t\t\t\t\t//player.audio.addEventListener( event, (e) => mediaPlayer[event](player, e) );\n\t\t\t\t});\n\n\t\t\t\tplayer.controls.startStop.addEventListener('click', (e) => this.playStop(e, player));\n\n\t\t\t});\n\t\t}\n\t}\n\n\tplayStop(playStopElem, player){\n\t\tconsole.log({\n\t\t\tplayStopElem:playStopElem,\n\t\t\tplayer:player\n\t\t});\n\t}\n\n}\n\nexports = module.exports = mediaPlayer;"],"sourceRoot":""}